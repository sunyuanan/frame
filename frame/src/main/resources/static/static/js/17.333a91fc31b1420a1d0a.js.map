{"version":3,"sources":["webpack:///src/views/File.vue","webpack:///./src/views/File.vue?aebc","webpack:///./src/views/File.vue"],"names":["File","name","data","search","tableData","tabH","page","total","limit","staticType","currentPage","dialog","title","form","options","value","rules","pid","required","message","trigger","orderNum","fjdlList","fjlxList","fileList","templateParams","uploadAddress","baseUrl","sessionStorage","getItem","id","created","obj","Object","this","tabNum","mounted","listByPage","getDictFjdl","getDictFjlx","methods","deleteFileInfo","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","ids","wrap","_context","prev","next","push","httpApi","then","response","code","$message","success","error","msg","stop","showEditFileDialog","row","submitForm","formName","_this2","fjdl","fjlx","tempPath","filePath","realName","$refs","validate","valid","addFile","editFile","_this3","_callee2","_ref","_context2","sent","clearFormData","abrupt","_this4","_callee3","_ref2","_context3","resetFields","_this5","_callee4","result","_context4","_this6","_callee5","_context5","_this7","_callee6","_context6","records","pageFun","_this8","_callee7","_context7","showFileDiglog","handleAvatarSuccess","res","file","console","log","fileName","params","beforeRemove","views_File","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","type","on","click","$event","_v","placeholder","suffix-icon","input","model","callback","$$v","expression","height","default-expand-all","row-key","label","show-overflow-tooltip","scopedSlots","_u","key","fn","scope","_s","ysmc","fjhzm","createTime","background","current-page","page-size","layout","current-change","update:currentPage","$set","update:current-page","visible","width","center","update:visible","close","ref","inline","label-width","prop","filterable","_l","item","dictLabel","action","multiple","on-success","file-list","before-remove","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.333a91fc31b1420a1d0a.js","sourcesContent":["<template>\r\n  <div class=\"main_container\">\r\n    <div class=\"tab_container\">\r\n      <div class=\"operation\">\r\n        <el-button size=\"medium\" type=\"primary\" @click=\"showFileDiglog()\">添加附件</el-button>\r\n        <el-input class=\"search_input\" v-model=\"search\" placeholder=\"附件大类/附件类型/原始名称/后缀名\" @input=\"listByPage()\"\r\n          suffix-icon=\"el-icon-search\"></el-input>\r\n      </div>\r\n      <el-table :data=\"tableData\" :height=\"tabH\" default-expand-all row-key=\"id\">\r\n        <el-table-column label=\"原始名称\" :show-overflow-tooltip=\"true\">\r\n          <template slot-scope=\"scope\"><span>{{scope.row.ysmc}}</span></template>\r\n        </el-table-column>\r\n        <el-table-column label=\"附件大类\">\r\n          <template slot-scope=\"scope\"><span>{{scope.row.fjdl}}</span></template>\r\n        </el-table-column>\r\n        <el-table-column label=\"附件类型\">\r\n          <template slot-scope=\"scope\"><span>{{scope.row.fjlx}}</span></template>\r\n        </el-table-column>\r\n        <el-table-column label=\"后缀名\">\r\n          <template slot-scope=\"scope\"><span>{{scope.row.fjhzm}}</span></template>\r\n        </el-table-column>\r\n        <el-table-column label=\"创建时间\">\r\n          <template slot-scope=\"scope\"><span>{{scope.row.createTime}}</span></template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"showEditFileDialog(scope.row)\">编辑</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\" deleteFileInfo(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"page\">\r\n        <el-pagination background @current-change=\"pageFun\" :current-page.sync=\"page.page\" :page-size=\"page.limit\"\r\n          layout=\"total, prev, pager, next, jumper\" :total=\"page.total\">\r\n        </el-pagination>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"dialog_container\">\r\n      <el-dialog :title=\"title\" :visible.sync=\"dialog\" width=\"30%\" center @close=\"clearFormData()\">\r\n        <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" :inline=\"true\" label-width=\"140px\">\r\n          <el-form-item label=\"附件大类\" prop=\"fjdl\">\r\n            <el-select v-model=\"form.fjdl\" filterable placeholder=\"请选择\">\r\n              <el-option v-for=\"item in fjdlList\" :key=\"item.id\" :label=\"item.dictLabel\" :value=\"item.dictLabel\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"附件类型\" prop=\"fjlx\">\r\n            <el-select v-model=\"form.fjlx\" filterable placeholder=\"请选择\">\r\n              <el-option v-for=\"item in fjlxList\" :key=\"item.id\" :label=\"item.dictLabel\" :value=\"item.dictLabel\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"附件上传\">\r\n            <el-upload class=\"upload-demo\" :action=\"uploadAddress\" multiple :limit=\"1\" :on-success=\"handleAvatarSuccess\"\r\n              :file-list=\"fileList\" :before-remove=\"beforeRemove\">\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n\r\n        </el-form>\r\n        <div class=\"dialog_button\">\r\n          <el-button size=\"medium\" type=\"primary\" @click=\"submitForm('form')\">确 定</el-button>\r\n          <el-button size=\"medium\" type=\"primary\" @click=\"clearFormData()\">取 消</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { httpRequestUrl } from \"@/api/baseUrl\";\r\nimport { addAttachement, publicAttachementListByPage, getDict, deleteFile, editAttachement } from \"@/api/httpApi\";\r\nimport { pageObj, autoPageObjFun } from \"@/api/staticType\";\r\nexport default {\r\n  name: 'File',\r\n  data () {\r\n    return {\r\n      search: \"\",\r\n      tableData: [],\r\n      tabH: 0,\r\n      page: {\r\n        total: 0,\r\n        limit: 0,\r\n        page: pageObj.currentPage,\r\n      },\r\n      dialog: false,\r\n      title: \"\",\r\n      form: {},\r\n      options: [],\r\n      value: '',\r\n      rules: {\r\n        pid: [\r\n          { required: true, message: '请选择所属菜单', trigger: 'blur' },\r\n        ],\r\n        name: [\r\n          { required: true, message: '请输入菜单名称', trigger: 'blur' },\r\n        ],\r\n        orderNum: [\r\n          { required: true, message: '请输入排序', trigger: 'blur' },\r\n        ],\r\n      },\r\n      fjdlList: [],\r\n      fjlxList: [],\r\n      fileList: [],\r\n      templateParams: {},\r\n      uploadAddress: httpRequestUrl + \"/file/upload?authorization=\" + sessionStorage.getItem(\"token\"),\r\n      id: null\r\n    }\r\n  },\r\n  //生命周期 - 创建完成（访问当前this实例）\r\n  created () {\r\n    let obj = autoPageObjFun();\r\n    this.tabH = obj.tabH;\r\n    this.page.limit = obj.tabNum;\r\n  },\r\n  //生命周期 - 挂载完成（访问DOM元素）\r\n  mounted () {\r\n    this.listByPage();\r\n    this.getDictFjdl();\r\n    this.getDictFjlx();\r\n  },\r\n  methods: {\r\n    async deleteFileInfo (id) {\r\n      let ids = [];\r\n      ids.push(id);\r\n      await deleteFile(ids).then((data) => {\r\n        let response = data.data;\r\n        if (response.code === 0) {\r\n          this.listByPage();\r\n          return this.$message.success(\"删除成功\");\r\n        } else {\r\n          return this.$message.error(response.msg);\r\n        }\r\n      });\r\n    },\r\n    showEditFileDialog (row) {\r\n      this.form = row;\r\n      this.id = row.id;\r\n      this.title = \"编辑附件\"\r\n      this.dialog = true;\r\n    },\r\n    submitForm (formName) {\r\n      let id = this.id;\r\n      let fjdl = this.form.fjdl;\r\n      let fjlx = this.form.fjlx;\r\n      let tempPath = this.templateParams.filePath;\r\n      let realName = this.templateParams.realName\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (id == null) {\r\n            this.addFile(fjdl, fjlx, tempPath, realName);\r\n          } else {\r\n            this.editFile(id, fjdl, fjlx, tempPath, realName);\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    async editFile (id, fjdl, fjlx, tempPath, realName) {\r\n      let { data } = await editAttachement(id, fjdl, fjlx, tempPath, realName);\r\n      if (data.code === 0) {\r\n        this.clearFormData();\r\n        return this.$message.success(data.msg);\r\n      } else {\r\n        return this.$message.error(data.msg);\r\n      }\r\n    },\r\n    async addFile (fjdl, fjlx, tempPath, realName) {\r\n      let { data } = await addAttachement(fjdl, fjlx, tempPath, realName);\r\n      if (data.code === 0) {\r\n        this.clearFormData();\r\n        return this.$message.success(data.msg);\r\n      } else {\r\n        return this.$message.error(data.msg);\r\n      }\r\n    },\r\n    clearFormData () {\r\n      this.$refs['form'].resetFields();\r\n      this.form = {};\r\n      this.fileList = []\r\n      this.id = null;\r\n      this.dialog = false;\r\n      this.listByPage();\r\n    },\r\n    async getDictFjdl () {\r\n      let result = await getDict(\"majorCategories\").then((data) => {\r\n        let response = data.data;\r\n        if (response.code === 0) {\r\n          return response.data;\r\n        } else {\r\n          return this.$message.error(response.msg);\r\n        }\r\n      });\r\n      this.fjdlList = result;\r\n    },\r\n    async getDictFjlx () {\r\n      let result = await getDict(\"systemPathConfiguration\").then((data) => {\r\n        let response = data.data;\r\n        if (response.code === 0) {\r\n          return response.data;\r\n        } else {\r\n          return this.$message.error(response.msg);\r\n        }\r\n      });\r\n      this.fjlxList = result;\r\n    },\r\n    async listByPage () {\r\n      let result = await publicAttachementListByPage(this.page.page, this.page.limit, this.search).then((data) => {\r\n        let response = data.data;\r\n        if (response.code === 0) {\r\n          return response.data;\r\n        } else {\r\n          return this.$message.error(response.msg);\r\n        }\r\n      });\r\n      this.tableData = result.records;\r\n      this.page.total = result.total;\r\n    },\r\n    async pageFun (page) {\r\n      let result = await publicAttachementListByPage(page, this.page.limit, this.search).then((data) => {\r\n        let response = data.data;\r\n        if (response.code === 0) {\r\n          return response.data;\r\n        } else {\r\n          return this.$message.error(response.msg);\r\n        }\r\n      });\r\n      this.tableData = result.records;\r\n      this.page.total = result.total;\r\n    },\r\n    showFileDiglog () {\r\n      this.title = \"添加附件\"\r\n      this.dialog = true\r\n    },\r\n\r\n    handleAvatarSuccess (res, file) {  //  文件上传\r\n      console.log(res);\r\n      console.log(file);\r\n      if (res.code === 0) {\r\n        this.templateParams.filePath = res.data.filePath + res.data.fileName;\r\n        this.templateParams.realName = res.data.realName\r\n\r\n\r\n      }\r\n      let params = {\r\n        name: res.data.realName,\r\n      };\r\n      this.fileList = []\r\n      this.fileList.push(params);\r\n    },\r\n    beforeRemove (file, fileList) {\r\n      this.fileList = [];\r\n      this.templateParams.filePath = null;\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n/* @import url(); 引入css类 */\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/File.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main_container\"},[_c('div',{staticClass:\"tab_container\"},[_c('div',{staticClass:\"operation\"},[_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showFileDiglog()}}},[_vm._v(\"添加附件\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"search_input\",attrs:{\"placeholder\":\"附件大类/附件类型/原始名称/后缀名\",\"suffix-icon\":\"el-icon-search\"},on:{\"input\":function($event){return _vm.listByPage()}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.tableData,\"height\":_vm.tabH,\"default-expand-all\":\"\",\"row-key\":\"id\"}},[_c('el-table-column',{attrs:{\"label\":\"原始名称\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.ysmc))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"附件大类\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.fjdl))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"附件类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.fjlx))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"后缀名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.fjhzm))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.createTime))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showEditFileDialog(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteFileInfo(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.page.page,\"page-size\":_vm.page.limit,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.page.total},on:{\"current-change\":_vm.pageFun,\"update:currentPage\":function($event){return _vm.$set(_vm.page, \"page\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.page, \"page\", $event)}}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog_container\"},[_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialog,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialog=$event},\"close\":function($event){return _vm.clearFormData()}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"inline\":true,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"附件大类\",\"prop\":\"fjdl\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.form.fjdl),callback:function ($$v) {_vm.$set(_vm.form, \"fjdl\", $$v)},expression:\"form.fjdl\"}},_vm._l((_vm.fjdlList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.dictLabel,\"value\":item.dictLabel}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"附件类型\",\"prop\":\"fjlx\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.form.fjlx),callback:function ($$v) {_vm.$set(_vm.form, \"fjlx\", $$v)},expression:\"form.fjlx\"}},_vm._l((_vm.fjlxList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.dictLabel,\"value\":item.dictLabel}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"附件上传\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadAddress,\"multiple\":\"\",\"limit\":1,\"on-success\":_vm.handleAvatarSuccess,\"file-list\":_vm.fileList,\"before-remove\":_vm.beforeRemove}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog_button\"},[_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"medium\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.clearFormData()}}},[_vm._v(\"取 消\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27a2daa9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/File.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27a2daa9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./File.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./File.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./File.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27a2daa9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./File.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27a2daa9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/File.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}