webpackJsonp([10],{"3w91":function(e,t){},IJDP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),o=r("exGp"),n=r.n(o),l=r("7RZP"),i=r("QbhR"),c={name:"SysUser",data:function(){return{tableData:[],tabH:0,page:{total:0,limit:0,page:i.d.currentPage},search:"",treeData:[],defaultProps:{children:"children",label:"sdName"},title:"",form:{},rules:{},dialog:!1,sdCode:"",roleList:[],sdName:"",id:null,lockUserDialog:!1,lockUserForm:{}}},created:function(){var e=Object(i.a)();this.tabH=e.tabH,this.page.limit=e.tabNum},mounted:function(){this.getTreeALL(),this.showSysUserAll(),this.getSysRolelist()},methods:{untieUserInfo:function(e){var t=this;return n()(s.a.mark(function r(){var a,o;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l._6)(e);case 2:if(a=r.sent,0!==(o=a.data).code){r.next=9;break}return t.showSysUserAll(),r.abrupt("return",t.$message.success(o.msg));case 9:return r.abrupt("return",t.$message.error(o.msg));case 10:case"end":return r.stop()}},r,t)}))()},submitLockUserForm:function(e){var t=this,r=this.lockUserForm.id,a=this.lockUserForm.time;this.$refs[e].validate(function(e){e&&t.lockUserInfo(r,a)})},lockUserInfo:function(e,t){var r=this;return n()(s.a.mark(function a(){var o,n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.Q)(e,t);case 2:if(o=a.sent,0!==(n=o.data).code){a.next=9;break}return r.clearLockUserFormData(),a.abrupt("return",r.$message.success(n.msg));case 9:return a.abrupt("return",r.$message.error(n.msg));case 10:case"end":return a.stop()}},a,r)}))()},clearLockUserFormData:function(){this.$refs.lockUserForm.resetFields(),this.lockUserForm={},this.lockUserDialog=!1,this.showSysUserAll()},lockUserInfoDialog:function(e){this.lockUserForm.id=e,this.lockUserDialog=!0},showStatus:function(e,t){return 0==e?"正常":1==e?"锁定":2==e?"锁定("+t+"分钟)":void 0},deleteUserInfo:function(e){var t=this;return n()(s.a.mark(function r(){var a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(a=[]).push(e),r.next=4,Object(l.x)(a).then(function(e){var r=e.data;return 0===r.code?(t.showSysUserAll(),t.$message.success("删除成功")):t.$message.error(r.msg)});case 4:case"end":return r.stop()}},r,t)}))()},editUserDialog:function(e){this.title="编辑用户",this.sdName=e.sdName,this.form=e,this.id=e.id,this.dialog=!0},submitForm:function(e){var t=this,r=this.id,a=this.form.realName,s=this.form.zjhm,o=this.form.jh,n=this.form.password,l=this.form.roleIdList,i=this.form.sdCode,c=this.form.roleId,u=this.form.relateId;this.$refs[e].validate(function(e){if(!e)return!1;null==r?t.addUserInfo(a,s,o,n,l,i):t.editUserInfo(r,a,s,o,n,c,i,u)})},editUserInfo:function(e,t,r,a,o,i,c,u){var d=this;return n()(s.a.mark(function n(){var m,f;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.H)(e,t,r,a,o,i,c,u);case 2:if(m=s.sent,0!==(f=m.data).code){s.next=9;break}return d.clearFormData(),s.abrupt("return",d.$message.success(f.msg));case 9:return s.abrupt("return",d.$message.error(f.msg));case 10:case"end":return s.stop()}},n,d)}))()},addUserInfo:function(e,t,r,a,o,i){var c=this;return n()(s.a.mark(function n(){var u,d;return s.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.j)(e,t,r,a,o,i);case 2:if(u=s.sent,0!==(d=u.data).code){s.next=9;break}return c.clearFormData(),s.abrupt("return",c.$message.success(d.msg));case 9:return s.abrupt("return",c.$message.error(d.msg));case 10:case"end":return s.stop()}},n,c)}))()},handleNodeClick1:function(e){this.sdName=e.sdName,this.form.sdCode=e.sdCode},clearFormData:function(){this.$refs.form.resetFields(),this.form={},this.dialog=!1,this.sdName="",this.showSysUserAll(),this.id=null},getSysRolelist:function(){var e=this;return n()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l._3)().then(function(t){var r=t.data;return 0===r.code?r.data:e.$message.error(r.msg)});case 2:r=t.sent,e.roleList=r;case 4:case"end":return t.stop()}},t,e)}))()},showDialog:function(){this.title="新增用户",this.dialog=!0},showSysUserAll:function(){var e=this;return n()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l._4)(e.page.page,e.page.limit,e.search,e.sdCode).then(function(t){var r=t.data;return 0===r.code?r.data:e.$message.error(r.msg)});case 2:r=t.sent,console.log(r),e.tableData=r.records,e.page.total=r.total;case 6:case"end":return t.stop()}},t,e)}))()},pageFun:function(e){var t=this;return n()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},handleNodeClick:function(e){this.sdCode=e.sdCode,this.showSysUserAll()},getTreeALL:function(){var e=this;return n()(s.a.mark(function t(){var r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.treeData,t.next=3,Object(l.K)().then(function(t){var r=t.data;return 0===r.code?r.data:e.$message.error(r.msg)});case 3:a=t.sent,Object(i.c)(a,r);case 5:case"end":return t.stop()}},t,e)}))()},searchTableData:function(){this.showSysUserAll()},reset:function(){this.sdCode="",this.search="",this.showSysUserAll()}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main_container"},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:4}},[r("div",{},[r("div",{staticStyle:{"margin-top":"10px",display:"flex","align-items":"center"}},[e._v("树结构\n        ")]),e._v(" "),r("el-tree",{staticStyle:{"margin-top":"40px"},attrs:{"node-key":"id",data:e.treeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),r("el-col",{attrs:{span:20}},[r("div",{staticClass:"tab_container"},[r("div",{staticClass:"operation"},[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.showDialog()}}},[e._v("添加")]),e._v(" "),r("el-input",{staticClass:"search_input",attrs:{placeholder:"输入登录账号/姓名","suffix-icon":"el-icon-search"},on:{input:function(t){return e.searchTableData()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1),e._v(" "),r("el-table",{attrs:{data:e.tableData,height:e.tabH}},[r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.showStatus(t.row.status,t.row.time)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"登录账号","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.account))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"密码","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.password))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"警号","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.jh))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"证件号码","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.zjhm))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"姓名","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.realName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.sdName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"角色","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.roleName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.editUserDialog(t.row)}}},[e._v(" 编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(r){return e.untieUserInfo(t.row.id)}}},[e._v(" 解封")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.lockUserInfoDialog(t.row.id)}}},[e._v(" 锁定")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteUserInfo(t.row.relateId)}}},[e._v(" 删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"page"},[r("el-pagination",{attrs:{background:"","current-page":e.page.page,"page-size":e.page.limit,layout:"total, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.pageFun,"update:currentPage":function(t){return e.$set(e.page,"page",t)},"update:current-page":function(t){return e.$set(e.page,"page",t)}}})],1)],1)])],1),e._v(" "),r("div",{staticClass:"dialog_container"},[r("el-dialog",{attrs:{title:e.title,visible:e.dialog,width:"50%",center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.dialog=t},close:function(t){return e.clearFormData()}}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("p",[e._v("单位：")]),e._v(" "),r("el-tree",{staticStyle:{"margin-top":"20px"},attrs:{"node-key":"id",data:e.treeData,props:e.defaultProps},on:{"node-click":e.handleNodeClick1}})],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,inline:!0,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"单位"}},[r("el-input",{attrs:{placeholder:"请选择单位",disabled:""},model:{value:e.sdName,callback:function(t){e.sdName=t},expression:"sdName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"realName"}},[r("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"证件号码",prop:"zjhm"}},[r("el-input",{attrs:{placeholder:"请输入证件号码"},model:{value:e.form.zjhm,callback:function(t){e.$set(e.form,"zjhm",t)},expression:"form.zjhm"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"警号",prop:"jh"}},[r("el-input",{attrs:{placeholder:"请输入警号"},model:{value:e.form.jh,callback:function(t){e.$set(e.form,"jh",t)},expression:"form.jh"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[null==e.id?r("el-select",{attrs:{placeholder:"请选择角色",multiple:""},model:{value:e.form.roleIdList,callback:function(t){e.$set(e.form,"roleIdList",t)},expression:"form.roleIdList"}},e._l(e.roleList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):r("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog_button"},[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")]),e._v(" "),r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.clearFormData()}}},[e._v("取 消")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"锁定用户",visible:e.lockUserDialog,width:"30%",center:"","destroy-on-close":!0},on:{"update:visible":function(t){e.lockUserDialog=t},close:function(t){return e.clearLockUserFormData()}}},[r("el-form",{ref:"lockUserForm",attrs:{model:e.lockUserForm,inline:!0,"label-width":"180px"}},[r("el-form-item",{attrs:{label:"锁定时长",prop:"roleId"}},[r("el-select",{attrs:{placeholder:"请选择锁定时长"},model:{value:e.lockUserForm.time,callback:function(t){e.$set(e.lockUserForm,"time",t)},expression:"lockUserForm.time"}},[r("el-option",{key:"1",attrs:{label:"30分钟",value:"30"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"60分钟",value:"60"}}),e._v(" "),r("el-option",{key:"3",attrs:{label:"永久",value:"-1"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog_button"},[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.submitLockUserForm("lockUserForm")}}},[e._v("确 定")]),e._v(" "),r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.clearLockUserFormData()}}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]};var d=r("VU/8")(c,u,!1,function(e){r("3w91")},"data-v-56a4235e",null);t.default=d.exports}});
//# sourceMappingURL=10.e5f4622ada7e56d4b37a.js.map